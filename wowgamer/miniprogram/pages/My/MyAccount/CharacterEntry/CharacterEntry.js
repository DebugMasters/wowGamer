"use strict";
var app = getApp();
Page({
    data: {
        mode: '',
        realmType: '',
        accountId: '',
        disableCheck1: false,
        specializations: [
            { name: '冰霜', value: "0", checked: false },
            { name: '火焰', value: "1", checked: false },
            { name: '奥数', value: "2", checked: false }
        ],
        allienceHorde: [],
        jobs: [
            ['联盟', '部落'],
            ['战士', '萨满祭司', '猎人', '潜行者', '德鲁伊', '牧师', '术士', '法师']
        ],
        jobIndex: [0, 0],
        servers: [
            ['五区', '一区'],
            ['安娜丝塔丽', '阿什坎迪', '巴罗夫', '比格沃斯', '碧空之歌', '匕首岭', '比斯巨兽', '布鲁', '厄运之槌', '法尔班克斯']
        ],
        serverIndex: [0, 0],
    },
    onLoad: function (option) {
        if (option.mode == 'AddNew') {
            this.setData({
                mode: option.mode,
                realmType: option.realmType,
                accountId: option.accountId
            });
        }
        else if (option.mode == 'Modify') {
            this.setData({
                mode: option.mode,
                characterId: option.characterId
            });
        }
    },
    formSubmit: function (e) {
        var detailData = {
            characterId: '',
            characterName: e.detail.value.characterName,
            characterAccount: this.data.accountId,
            characterRealm: 1,
            characterRealmType: 1,
            characterClass: 1,
            allianceHorde: 9,
            characterSpecialization: 1,
            userId: wx.getStorageSync('id')
        };
        app.requestFunc('/user/saveCharacter', detailData, 'POST', function (res) {
            console.log(res.data);
            if (res.data.success == true) {
                wx.showToast({
                    title: res.data.msg,
                    icon: 'success',
                    duration: 1000
                });
                wx.navigateBack({
                    delta: 2
                });
            }
            else {
                wx.showToast({
                    title: res.data.msg,
                    icon: 'none',
                    duration: 1000
                });
            }
        });
    },
    jobsChange: function (e) {
        this.setData({
            multiIndex: e.detail.value
        });
    },
    jobsColumnChange: function (e) {
        var data = {
            jobs: this.data.jobs,
            jobIndex: this.data.jobIndex
        };
        data.jobIndex[e.detail.column] = e.detail.value;
        switch (e.detail.column) {
            case 0:
                switch (data.jobIndex[0]) {
                    case 0:
                        data.jobs[1] = ['战士', '萨满祭司', '猎人', '潜行者', '德鲁伊', '牧师', '术士', '法师'];
                        break;
                    case 1:
                        data.jobs[1] = ['战士', '萨满祭司', '猎人', '潜行者', '德鲁伊', '牧师', '术士', '法师'];
                        break;
                }
                data.jobIndex[1] = 0;
                break;
        }
        this.setData(data);
    },
    serversChange: function (e) {
        this.setData({
            multiIndex: e.detail.value
        });
    },
    serversColumnChange: function (e) {
        var data = {
            servers: this.data.servers,
            serverIndex: this.data.serverIndex
        };
        data.serverIndex[e.detail.column] = e.detail.value;
        switch (e.detail.column) {
            case 0:
                switch (data.serverIndex[0]) {
                    case 0:
                        data.servers[1] = ['安娜丝塔丽', '阿什坎迪', '巴罗夫', '比格沃斯', '碧空之歌', '匕首岭', '比斯巨兽', '布鲁', '厄运之槌', '法尔班克斯'];
                        break;
                    case 1:
                        data.servers[1] = ['艾隆纳亚', '埃提耶什', '奥金斧', '奥罗', '碧玉矿洞', '德姆塞卡尔', '骨火', '哈霍兰', '寒脊山小径', '黑曜石之锋', '怀特迈恩', '灰烬使者', '毁灭之刃'];
                        break;
                }
                data.serverIndex[1] = 0;
                break;
        }
        this.setData(data);
    },
    checkboxChange: function (e) {
        var templist = this.data.specializations;
        templist.forEach(function (r) {
            if (e.detail.value.indexOf(r.value) >= 0) {
                r.checked = true;
            }
            else {
                r.checked = false;
            }
        });
        this.setData({
            specializations: templist
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2hhcmFjdGVyRW50cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJDaGFyYWN0ZXJFbnRyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUEsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFjLENBQUE7QUFFaEMsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLEVBQUU7UUFDUixTQUFTLEVBQUUsRUFBRTtRQUNiLFNBQVMsRUFBRSxFQUFFO1FBQ2IsYUFBYSxFQUFFLEtBQUs7UUFDcEIsZUFBZSxFQUFFO1lBQ2YsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRTtZQUMxQyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFO1lBQ3pDLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7U0FDMUM7UUFDRCxhQUFhLEVBQUUsRUFFZDtRQUNELElBQUksRUFBRTtZQUNKLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztZQUNaLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztTQUNyRDtRQUNELFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEIsT0FBTyxFQUFFO1lBQ1AsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO1lBQ1osQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUM7U0FDL0U7UUFDRCxXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ3BCO0lBQ0QsTUFBTSxZQUFDLE1BQU07UUFDWCxJQUFHLE1BQU0sQ0FBQyxJQUFJLElBQUksUUFBUSxFQUFFO1lBQzFCLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1gsSUFBSSxFQUFHLE1BQU0sQ0FBQyxJQUFJO2dCQUNsQixTQUFTLEVBQUUsTUFBTSxDQUFDLFNBQVM7Z0JBQzNCLFNBQVMsRUFBRSxNQUFNLENBQUMsU0FBUzthQUM1QixDQUFDLENBQUE7U0FDSDthQUFNLElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUU7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDWCxJQUFJLEVBQUcsTUFBTSxDQUFDLElBQUk7Z0JBQ2xCLFdBQVcsRUFBRSxNQUFNLENBQUMsV0FBVzthQUNoQyxDQUFDLENBQUE7U0FDSDtJQUNILENBQUM7SUFDRCxVQUFVLFlBQUMsQ0FBQztRQUNWLElBQUksVUFBVSxHQUFHO1lBQ2YsV0FBVyxFQUFFLEVBQUU7WUFDZixhQUFhLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsYUFBYTtZQUMzQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVM7WUFDckMsY0FBYyxFQUFFLENBQUM7WUFDakIsa0JBQWtCLEVBQUUsQ0FBQztZQUNyQixjQUFjLEVBQUUsQ0FBQztZQUNqQixhQUFhLEVBQUUsQ0FBQztZQUNoQix1QkFBdUIsRUFBRSxDQUFDO1lBQzFCLE1BQU0sRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztTQUNoQyxDQUFBO1FBRUQsR0FBRyxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFVBQUEsR0FBRztZQUM1RCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QixJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksRUFBRTtnQkFDNUIsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDWCxLQUFLLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHO29CQUNuQixJQUFJLEVBQUUsU0FBUztvQkFDZixRQUFRLEVBQUUsSUFBSTtpQkFDZixDQUFDLENBQUE7Z0JBQ0YsRUFBRSxDQUFDLFlBQVksQ0FBQztvQkFDZCxLQUFLLEVBQUUsQ0FBQztpQkFDVCxDQUFDLENBQUE7YUFDSDtpQkFBTTtnQkFDTCxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNYLEtBQUssRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUc7b0JBQ25CLElBQUksRUFBRSxNQUFNO29CQUNaLFFBQVEsRUFBRSxJQUFJO2lCQUNmLENBQUMsQ0FBQTthQUNIO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsVUFBVSxZQUFDLENBQUM7UUFDVixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSztTQUMzQixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsZ0JBQWdCLFlBQUMsQ0FBQztRQUNoQixJQUFJLElBQUksR0FBRztZQUNULElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtTQUM3QixDQUFDO1FBQ0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2hELFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFDdkIsS0FBSyxDQUFDO2dCQUNKLFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDeEIsS0FBSyxDQUFDO3dCQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBQ3BFLE1BQU07b0JBQ1IsS0FBSyxDQUFDO3dCQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBQ3BFLE1BQU07aUJBQ1Q7Z0JBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3JCLE1BQU07U0FDVDtRQUNELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUNELGFBQWEsWUFBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUs7U0FDM0IsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUNELG1CQUFtQixZQUFDLENBQUM7UUFDbkIsSUFBSSxJQUFJLEdBQUc7WUFDVCxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO1lBQzFCLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVc7U0FDbkMsQ0FBQztRQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNuRCxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO1lBQ3ZCLEtBQUssQ0FBQztnQkFDSixRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQzNCLEtBQUssQ0FBQzt3QkFDSixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQ2pHLE1BQU07b0JBQ1IsS0FBSyxDQUFDO3dCQUNKLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzt3QkFDeEgsTUFBTTtpQkFDVDtnQkFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDeEIsTUFBTTtTQUNUO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBRUQsY0FBYyxFQUFFLFVBQVUsQ0FBQztRQUN6QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUN6QyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQztZQUNoQixJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUN4QyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzthQUNsQjtpQkFBTTtnQkFDTCxDQUFDLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzthQUNuQjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLGVBQWUsRUFBRSxRQUFRO1NBQzFCLENBQUMsQ0FBQTtJQUVKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbmRleC50c1xuLy8g6I635Y+W5bqU55So5a6e5L6LXG5jb25zdCBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKVxuXG5QYWdlKHtcbiAgZGF0YToge1xuICAgIG1vZGU6ICcnLFxuICAgIHJlYWxtVHlwZTogJycsXG4gICAgYWNjb3VudElkIDonJyxcbiAgICBkaXNhYmxlQ2hlY2sxOiBmYWxzZSxcbiAgICBzcGVjaWFsaXphdGlvbnM6IFtcbiAgICAgIHsgbmFtZTogJ+WGsOmcnCcsIHZhbHVlOiBcIjBcIiwgY2hlY2tlZDogZmFsc2UgfSxcbiAgICAgIHtuYW1lOiAn54Gr54SwJywgdmFsdWU6IFwiMVwiLCBjaGVja2VkOiBmYWxzZSB9LFxuICAgICAge25hbWU6ICflpaXmlbAnLCB2YWx1ZTogXCIyXCIsIGNoZWNrZWQ6IGZhbHNlIH1cbiAgICBdLC8v5LiT57K+XG4gICAgYWxsaWVuY2VIb3JkZTogW1xuXG4gICAgXSxcbiAgICBqb2JzOiBbXG4gICAgICBbJ+iBlOebnycsICfpg6jokL0nXSxcbiAgICAgIFsn5oiY5aOrJywgJ+iQqOa7oeelreWPuCcsICfnjI7kuronLCAn5r2c6KGM6ICFJywgJ+W+t+mygeS8iicsICfniafluIgnLCAn5pyv5aOrJywgJ+azleW4iCddXG4gICAgXSxcbiAgICBqb2JJbmRleDogWzAsIDBdLFxuICAgIHNlcnZlcnM6IFtcbiAgICAgIFsn5LqU5Yy6JywgJ+S4gOWMuiddLFxuICAgICAgWyflronlqJzkuJ3loZTkuL0nLCAn6Zi/5LuA5Z2O6L+qJywgJ+W3tOe9l+WkqycsICfmr5TmoLzmsoPmlq8nLCAn56Kn56m65LmL5q2MJywgJ+WMlemmluWyrScsICfmr5Tmlq/lt6jlhb0nLCAn5biD6bKBJywgJ+WOhOi/kOS5i+anjCcsICfms5XlsJTnj63lhYvmlq8nXVxuICAgIF0sXG4gICAgc2VydmVySW5kZXg6IFswLCAwXSxcbiAgfSxcbiAgb25Mb2FkKG9wdGlvbikge1xuICAgIGlmKG9wdGlvbi5tb2RlID09ICdBZGROZXcnKSB7XG4gICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICBtb2RlIDogb3B0aW9uLm1vZGUsXG4gICAgICAgIHJlYWxtVHlwZTogb3B0aW9uLnJlYWxtVHlwZSxcbiAgICAgICAgYWNjb3VudElkOiBvcHRpb24uYWNjb3VudElkXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAob3B0aW9uLm1vZGUgPT0gJ01vZGlmeScpIHtcbiAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgIG1vZGUgOiBvcHRpb24ubW9kZSxcbiAgICAgICAgY2hhcmFjdGVySWQ6IG9wdGlvbi5jaGFyYWN0ZXJJZFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG4gIGZvcm1TdWJtaXQoZSkge1xuICAgIGxldCBkZXRhaWxEYXRhID0ge1xuICAgICAgY2hhcmFjdGVySWQ6ICcnLFxuICAgICAgY2hhcmFjdGVyTmFtZTogZS5kZXRhaWwudmFsdWUuY2hhcmFjdGVyTmFtZSxcbiAgICAgIGNoYXJhY3RlckFjY291bnQ6IHRoaXMuZGF0YS5hY2NvdW50SWQsXG4gICAgICBjaGFyYWN0ZXJSZWFsbTogMSxcbiAgICAgIGNoYXJhY3RlclJlYWxtVHlwZTogMSxcbiAgICAgIGNoYXJhY3RlckNsYXNzOiAxLFxuICAgICAgYWxsaWFuY2VIb3JkZTogOSxcbiAgICAgIGNoYXJhY3RlclNwZWNpYWxpemF0aW9uOiAxLFxuICAgICAgdXNlcklkOiB3eC5nZXRTdG9yYWdlU3luYygnaWQnKVxuICAgIH1cbiAgICBcbiAgICBhcHAucmVxdWVzdEZ1bmMoJy91c2VyL3NhdmVDaGFyYWN0ZXInLCBkZXRhaWxEYXRhLCAnUE9TVCcsIHJlcyA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcyA9PSB0cnVlKSB7XG4gICAgICAgIHd4LnNob3dUb2FzdCh7XG4gICAgICAgICAgdGl0bGU6IHJlcy5kYXRhLm1zZyxcbiAgICAgICAgICBpY29uOiAnc3VjY2VzcycsXG4gICAgICAgICAgZHVyYXRpb246IDEwMDBcbiAgICAgICAgfSlcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHtcbiAgICAgICAgICBkZWx0YTogMlxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3guc2hvd1RvYXN0KHtcbiAgICAgICAgICB0aXRsZTogcmVzLmRhdGEubXNnLFxuICAgICAgICAgIGljb246ICdub25lJyxcbiAgICAgICAgICBkdXJhdGlvbjogMTAwMFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgam9ic0NoYW5nZShlKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG11bHRpSW5kZXg6IGUuZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgfSxcbiAgam9ic0NvbHVtbkNoYW5nZShlKSB7XG4gICAgbGV0IGRhdGEgPSB7XG4gICAgICBqb2JzOiB0aGlzLmRhdGEuam9icyxcbiAgICAgIGpvYkluZGV4OiB0aGlzLmRhdGEuam9iSW5kZXhcbiAgICB9O1xuICAgIGRhdGEuam9iSW5kZXhbZS5kZXRhaWwuY29sdW1uXSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgIHN3aXRjaCAoZS5kZXRhaWwuY29sdW1uKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHN3aXRjaCAoZGF0YS5qb2JJbmRleFswXSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGRhdGEuam9ic1sxXSA9IFsn5oiY5aOrJywgJ+iQqOa7oeelreWPuCcsICfnjI7kuronLCAn5r2c6KGM6ICFJywgJ+W+t+mygeS8iicsICfniafluIgnLCAn5pyv5aOrJywgJ+azleW4iCddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgZGF0YS5qb2JzWzFdID0gWyfmiJjlo6snLCAn6JCo5ruh56Wt5Y+4JywgJ+eMjuS6uicsICfmvZzooYzogIUnLCAn5b636bKB5LyKJywgJ+eJp+W4iCcsICfmnK/lo6snLCAn5rOV5biIJ107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkYXRhLmpvYkluZGV4WzFdID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuc2V0RGF0YShkYXRhKTtcbiAgfSxcbiAgc2VydmVyc0NoYW5nZShlKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG11bHRpSW5kZXg6IGUuZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgfSxcbiAgc2VydmVyc0NvbHVtbkNoYW5nZShlKSB7XG4gICAgbGV0IGRhdGEgPSB7XG4gICAgICBzZXJ2ZXJzOiB0aGlzLmRhdGEuc2VydmVycyxcbiAgICAgIHNlcnZlckluZGV4OiB0aGlzLmRhdGEuc2VydmVySW5kZXhcbiAgICB9O1xuICAgIGRhdGEuc2VydmVySW5kZXhbZS5kZXRhaWwuY29sdW1uXSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgIHN3aXRjaCAoZS5kZXRhaWwuY29sdW1uKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHN3aXRjaCAoZGF0YS5zZXJ2ZXJJbmRleFswXSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGRhdGEuc2VydmVyc1sxXSA9IFsn5a6J5aic5Lid5aGU5Li9JywgJ+mYv+S7gOWdjui/qicsICflt7TnvZflpKsnLCAn5q+U5qC85rKD5pavJywgJ+eip+epuuS5i+atjCcsICfljJXpppblsq0nLCAn5q+U5pav5beo5YW9JywgJ+W4g+mygScsICfljoTov5DkuYvmp4wnLCAn5rOV5bCU54+t5YWL5pavJ107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBkYXRhLnNlcnZlcnNbMV0gPSBbJ+iJvumahue6s+S6micsICfln4Pmj5DogLbku4AnLCAn5aWl6YeR5panJywgJ+Wlpee9lycsICfnoqfnjonnn7/mtJ4nLCAn5b635aeG5aGe5Y2h5bCUJywgJ+mqqOeBqycsICflk4jpnI3lhbAnLCAn5a+S6ISK5bGx5bCP5b6EJywgJ+m7keabnOefs+S5i+mUiycsICfmgIDnibnov4jmgaknLCAn54Gw54Os5L2/6ICFJywgJ+avgeeBreS5i+WIgyddO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5zZXJ2ZXJJbmRleFsxXSA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLnNldERhdGEoZGF0YSk7XG4gIH0sXG5cbiAgY2hlY2tib3hDaGFuZ2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgbGV0IHRlbXBsaXN0ID0gdGhpcy5kYXRhLnNwZWNpYWxpemF0aW9ucztcbiAgICB0ZW1wbGlzdC5mb3JFYWNoKHIgPT4ge1xuICAgICAgaWYgKGUuZGV0YWlsLnZhbHVlLmluZGV4T2Yoci52YWx1ZSkgPj0gMCkge1xuICAgICAgICByLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgci5jaGVja2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgc3BlY2lhbGl6YXRpb25zOiB0ZW1wbGlzdFxuICAgIH0pXG4gICAgXG4gIH1cbn0pXG4iXX0=
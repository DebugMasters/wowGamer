"use strict";
const app = getApp();
Page({
    data: {
        userId: '',
        StatusBar: app.globalData.StatusBar,
        CustomBar: app.globalData.CustomBar,
        Custom: app.globalData.Custom,
        orderList: new Array(),
        orderStatusContent: [
            { id: 9, name: '订单状态' },
            { id: 0, name: '已下单' },
            { id: 1, name: '代练中' },
            { id: 2, name: '已完成' },
            { id: -1, name: '已关闭' }
        ],
        orderStatusIndex: 0
    },
    onLoad: function (options) {
        this.setData({
            userId: options.id,
        });
    },
    onShow: function () {
        app.requestFuncPromise('/order/orderList', { userId: this.data.userId }, 'GET')
            .then(res => {
            let tempList = res.data.orderList;
            tempList.forEach(x => {
                x.imgUrl = app.globalData.RootURL + 'warcraft/static/img/' + app.getResourcePath(x.characterClass, 'order');
            });
            this.setData({
                orderList: tempList
            });
        });
    },
    ChangeOrderChange: function (e) {
        this.setData({
            orderStatusIndex: e.detail.value
        });
        const orderstatusid = this.data.orderStatusContent[this.data.orderStatusIndex].id;
        let data = undefined;
        if (orderstatusid != 9) {
            data = {
                userId: this.data.userId,
                orderStatus: orderstatusid
            };
        }
        else {
            data = {
                userId: this.data.userId
            };
        }
        app.requestFuncPromise('/order/orderList', data, 'GET')
            .then(res => {
            let tempList = res.data.orderList;
            tempList.forEach(x => {
                x.imgUrl = app.globalData.RootURL + 'warcraft/static/img/' + app.getResourcePath(x.characterClass, 'order');
            });
            this.setData({
                orderList: tempList
            });
        });
    },
    NavToOrderEntry: function (e) {
        let transdata = {
            mode: 'Detail',
            userId: this.data.userId,
            orderId: e.currentTarget.dataset.orderid
        };
        const comData = JSON.stringify(transdata);
        wx.navigateTo({
            url: '../OrderEntry/OrderEntry' + '?data=' + comData,
            success: function (res) { },
            fail: function () { },
            complete: function () { }
        });
    },
    ListTouchStart(e) {
        this.setData({
            ListTouchStart: e.touches[0].pageX
        });
    },
    ListTouchMove(e) {
        this.setData({
            ListTouchDirection: e.touches[0].pageX - this.data.ListTouchStart > 0 ? 'right' : 'left'
        });
    },
    ListTouchEnd(e) {
        if (this.data.ListTouchDirection == 'left') {
            this.setData({
                modalName: e.currentTarget.dataset.target
            });
        }
        else {
            this.setData({
                modalName: null
            });
        }
        this.setData({
            ListTouchDirection: null
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3JkZXJMaXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiT3JkZXJMaXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSxNQUFNLEdBQUcsR0FBRyxNQUFNLEVBQWMsQ0FBQTtBQUVoQyxJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixNQUFNLEVBQUUsRUFBRTtRQUNWLFNBQVMsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFNBQVM7UUFDbkMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsU0FBUztRQUNuQyxNQUFNLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxNQUFNO1FBQzdCLFNBQVMsRUFBRSxJQUFJLEtBQUssRUFBRTtRQUN0QixrQkFBa0IsRUFBRTtZQUNsQixFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBQztZQUNyQixFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQztZQUNwQixFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQztZQUNwQixFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQztZQUNwQixFQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFDO1NBQ3RCO1FBQ0QsZ0JBQWdCLEVBQUUsQ0FBQztLQUNwQjtJQUNELE1BQU0sRUFBRSxVQUFVLE9BQU87UUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRTtTQUNuQixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsTUFBTSxFQUFFO1FBQ04sR0FBRyxDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixFQUFFLEVBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFDLEVBQUUsS0FBSyxDQUFDO2FBQzVFLElBQUksQ0FBQyxHQUFHLENBQUMs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QU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU07U0FDekYsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUdELFlBQVksQ0FBQyxDQUFDO1FBQ1osSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixJQUFHLE1BQU0sRUFBQztZQUN4QyxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLFNBQVMsRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxNQUFNO2FBQzFDLENBQUMsQ0FBQTtTQUNIO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLFNBQVMsRUFBRSxJQUFJO2FBQ2hCLENBQUMsQ0FBQTtTQUNIO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLGtCQUFrQixFQUFFLElBQUk7U0FDekIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUVGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGluZGV4LnRzXHJcbi8vIOiOt+WPluW6lOeUqOWunuS+i1xyXG5jb25zdCBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKVxyXG5cclxuUGFnZSh7XHJcbiAgZGF0YToge1xyXG4gICAgdXNlcklkOiAnJyxcclxuICAgIFN0YXR1c0JhcjogYXBwLmdsb2JhbERhdGEuU3RhdHVzQmFyLFxyXG4gICAgQ3VzdG9tQmFyOiBhcHAuZ2xvYmFsRGF0YS5DdXN0b21CYXIsXHJcbiAgICBDdXN0b206IGFwcC5nbG9iYWxEYXRhLkN1c3RvbSxcclxuICAgIG9yZGVyTGlzdDogbmV3IEFycmF5KCksXHJcbiAgICBvcmRlclN0YXR1c0NvbnRlbnQ6IFtcclxuICAgICAge2lkOiA5LCBuYW1lOiAn6K6i5Y2V54q25oCBJ30sXHJcbiAgICAgIHtpZDogMCwgbmFtZTogJ+W3suS4i+WNlSd9LFxyXG4gICAgICB7aWQ6IDEsIG5hbWU6ICfku6Pnu4PkuK0nfSxcclxuICAgICAge2lkOiAyLCBuYW1lOiAn5bey5a6M5oiQJ30sXHJcbiAgICAgIHtpZDogLTEsIG5hbWU6ICflt7LlhbPpl60nfVxyXG4gICAgXSxcclxuICAgIG9yZGVyU3RhdHVzSW5kZXg6IDBcclxuICB9LFxyXG4gIG9uTG9hZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIHVzZXJJZDogb3B0aW9ucy5pZCxcclxuICAgIH0pXHJcbiAgfSxcclxuICBvblNob3c6IGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5yZXF1ZXN0RnVuY1Byb21pc2UoJy9vcmRlci9vcmRlckxpc3QnLCB7dXNlcklkOiB0aGlzLmRhdGEudXNlcklkfSwgJ0dFVCcpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBsZXQgdGVtcExpc3QgPSByZXMuZGF0YS5vcmRlckxpc3RcclxuICAgICAgdGVtcExpc3QuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICB4LmltZ1VybCA9IGFwcC5nbG9iYWxEYXRhLlJvb3RVUkwgKyAnd2FyY3JhZnQvc3RhdGljL2ltZy8nICsgYXBwLmdldFJlc291cmNlUGF0aCh4LmNoYXJhY3RlckNsYXNzLCAnb3JkZXInKVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBvcmRlckxpc3Q6IHRlbXBMaXN0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgQ2hhbmdlT3JkZXJDaGFuZ2U6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBvcmRlclN0YXR1c0luZGV4OiBlLmRldGFpbC52YWx1ZVxyXG4gICAgfSlcclxuICAgIGNvbnN0IG9yZGVyc3RhdHVzaWQgPSB0aGlzLmRhdGEub3JkZXJTdGF0dXNDb250ZW50W3RoaXMuZGF0YS5vcmRlclN0YXR1c0luZGV4XS5pZDtcclxuICAgIGxldCBkYXRhID0gdW5kZWZpbmVkO1xyXG4gICAgaWYob3JkZXJzdGF0dXNpZCAhPSA5KSB7XHJcbiAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgdXNlcklkOiB0aGlzLmRhdGEudXNlcklkLFxyXG4gICAgICAgIG9yZGVyU3RhdHVzOiBvcmRlcnN0YXR1c2lkXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7ZGF0YSA9IHtcclxuICAgICAgdXNlcklkOiB0aGlzLmRhdGEudXNlcklkXHJcbiAgICB9XHJcbiAgICB9XHJcbiAgICBhcHAucmVxdWVzdEZ1bmNQcm9taXNlKCcvb3JkZXIvb3JkZXJMaXN0JywgZGF0YSwgJ0dFVCcpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBsZXQgdGVtcExpc3QgPSByZXMuZGF0YS5vcmRlckxpc3RcclxuICAgICAgdGVtcExpc3QuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICB4LmltZ1VybCA9IGFwcC5nbG9iYWxEYXRhLlJvb3RVUkwgKyAnd2FyY3JhZnQvc3RhdGljL2ltZy8nICsgYXBwLmdldFJlc291cmNlUGF0aCh4LmNoYXJhY3RlckNsYXNzLCAnb3JkZXInKVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBvcmRlckxpc3Q6IHRlbXBMaXN0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgTmF2VG9PcmRlckVudHJ5OiBmdW5jdGlvbiAoZTogYW55KSB7XHJcbiAgICBsZXQgdHJhbnNkYXRhID0ge1xyXG4gICAgICBtb2RlOiAnRGV0YWlsJyxcclxuICAgICAgdXNlcklkOiB0aGlzLmRhdGEudXNlcklkLFxyXG4gICAgICBvcmRlcklkOiBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vcmRlcmlkXHJcbiAgICB9XHJcbiAgICBjb25zdCBjb21EYXRhID0gSlNPTi5zdHJpbmdpZnkodHJhbnNkYXRhKTtcclxuICAgIHd4Lm5hdmlnYXRlVG8oe1xyXG4gICAgICB1cmw6ICcuLi9PcmRlckVudHJ5L09yZGVyRW50cnknICsgJz9kYXRhPScgKyBjb21EYXRhLFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyB9LFxyXG4gICAgICBmYWlsOiBmdW5jdGlvbigpIHsgfSxcclxuICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyB9XHJcbiAgICB9KVxyXG4gIH0sXHJcblxyXG4gIC8vIExpc3RUb3VjaOinpuaRuOW8gOWni1xyXG4gIExpc3RUb3VjaFN0YXJ0KGUpIHtcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIExpc3RUb3VjaFN0YXJ0OiBlLnRvdWNoZXNbMF0ucGFnZVhcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgLy8gTGlzdFRvdWNo6K6h566X5pa55ZCRXHJcbiAgTGlzdFRvdWNoTW92ZShlKSB7XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBMaXN0VG91Y2hEaXJlY3Rpb246IGUudG91Y2hlc1swXS5wYWdlWCAtIHRoaXMuZGF0YS5MaXN0VG91Y2hTdGFydCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnXHJcbiAgICB9KVxyXG4gIH0sXHJcblxyXG4gIC8vIExpc3RUb3VjaOiuoeeul+a7muWKqFxyXG4gIExpc3RUb3VjaEVuZChlKSB7XHJcbiAgICBpZiAodGhpcy5kYXRhLkxpc3RUb3VjaERpcmVjdGlvbiA9PSdsZWZ0Jyl7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgbW9kYWxOYW1lOiBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50YXJnZXRcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgbW9kYWxOYW1lOiBudWxsXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBMaXN0VG91Y2hEaXJlY3Rpb246IG51bGxcclxuICAgIH0pXHJcbiAgfSxcclxuICBcclxufSlcclxuIl19
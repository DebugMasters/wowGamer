"use strict";
const app = getApp();
Component({
    options: {
        addGlobalClass: true,
    },
    data: {
        userId: '',
        catalogType: '1',
        displayType: 1,
        orderCount: 0,
        orderBackgroundImg: '',
        noticeImg: '',
        index: 0,
        level1Content: new Array(),
        level1Index: 0,
        level1Money: 0,
        level2Content: new Array(),
        level2DisplayName: '',
        level2Currentlevel: NaN,
        level2Targetlevel: NaN,
        level2Index: 0,
        level2Money: 0,
        level3Content: new Array(),
        level3DisplayName: '',
        level3Index: 0,
        level3Money: 0,
        charactersContent: new Array(),
        charactersIndex: 0,
        totalMoney: 0,
        allianceHordeMap: new Map(),
        characterClassMap: new Map(),
        showNotice: false,
        isLogin: false,
        showAuthMessage: false
    },
    behaviors: [],
    lifetimes: {
        ready() {
        }
    },
    methods: {
        initData() {
            this.setData({
                userId: wx.getStorageSync('userId'),
                allianceHordeMap: new Map([[1, '联盟'], [2, '部落']]),
                characterClassMap: new Map([[1, '圣骑士'], [2, '战士'], [3, '死亡骑士'], [4, '猎人'], [5, '萨满祭司'], [6, '潜行者'], [7, '德鲁伊'], [8, '恶魔猎手'], [9, '法师'], [10, '牧师'], [11, '术士'], [12, '武僧']]),
                orderBackgroundImg: app.globalData.RootURL + 'warcraft/static/img/order.png',
                noticeImg: app.globalData.RootURL + 'warcraft/static/img/notice.jpg'
            });
            this.getLevel1();
            this.getCharacters();
            this.gettodaysOrder();
        },
        getLevel1() {
            app.requestFuncPromise('/system/getCatalogList', { parentId: '0', catalogType: parseInt(this.data.catalogType) }, 'GET')
                .then(res => {
                console.log(res);
                let data = {
                    level1Content: new Array(),
                    level1Money: res.data.catalogList[0].money
                };
                res.data.catalogList.forEach(x => {
                    data.level1Content.push({ id: x.id, name: x.catalogName, money: x.money });
                });
                this.setData(data);
                this.getLevel2(res.data.catalogList[0].id);
            })
                .catch(res => {
                console.log(res);
            });
        },
        level1Change(e) {
            this.setData({
                level1Index: parseInt(e.detail.value),
                level1Money: this.data.level1Content[parseInt(e.detail.value)].money,
                level2Index: 0,
                level3Index: 0
            });
            this.getLevel2(this.data.level1Content[this.data.level1Index].id);
        },
        getLevel2(parentId) {
            app.requestFuncPromise('/system/getCatalogList', { parentId: parentId, catalogType: parseInt(this.data.catalogType) }, 'GET')
                .then(res => {
                console.log(res);
                this.setData({
                    displayType: res.data.catalogList[0].catalogDisplayType,
                    level2DisplayName: res.data.catalogList[0].catalogDisplayName,
                    level2Money: res.data.catalogList[0].money
                });
                if (this.data.displayType == 1) {
                    let data = {
                        level2Content: new Array(),
                    };
                    res.data.catalogList.forEach(x => {
                        data.level2Content.push({ id: x.id, name: x.catalogName, money: x.money });
                    });
                    this.setData(data);
                }
                if (this.data.displayType == 2) {
                    let temp = res.data.catalogList[0].catalogName.split('-');
                    let data = {
                        level2Currentlevel: parseInt(temp[0]),
                        level2Targetlevel: parseInt(temp[1])
                    };
                    this.setData(data);
                }
                this.calcTotalMoney();
                this.getLevel3(res.data.catalogList[0].id);
            })
                .catch(res => {
                console.log(res);
            });
        },
        level2Change(e) {
            this.setData({
                level2Index: parseInt(e.detail.value),
                level2Money: this.data.level2Content[parseInt(e.detail.value)].money,
                level3Index: 0
            });
            this.getLevel3(this.data.level2Content[this.data.level2Index].id);
        },
        getLevel3(parentId) {
            app.requestFuncPromise('/system/getCatalogList', { parentId: parentId, catalogType: parseInt(this.data.catalogType) }, 'GET')
                .then(res => {
                console.log(res);
                let data = {
                    level3Content: new Array(),
                    level3DisplayName: res.data.catalogList[0].catalogDisplayName,
                    level3Money: res.data.catalogList[0].money
                };
                res.data.catalogList.forEach(x => {
                    data.level3Content.push({ id: x.id, name: x.catalogName, money: x.money });
                });
                this.setData(data);
                this.calcTotalMoney();
            })
                .catch(res => {
                console.log(res);
            });
        },
        level3Change(e) {
            this.setData({
                level3Index: parseInt(e.detail.value),
                level3Money: this.data.level3Content[parseInt(e.detail.value)].money
            });
            this.calcTotalMoney();
        },
        level2CurrentLevelBlur() {
            this.calcTotalMoney();
        },
        level2TargetLevelBlur() {
            this.calcTotalMoney();
        },
        level2CurrentLevelInput(e) {
            this.setData({
                level2Currentlevel: parseInt(e.detail.value)
            });
        },
        level2TargetLevelInput(e) {
            this.setData({
                level2Targetlevel: parseInt(e.detail.value)
            });
        },
        calcTotalMoney() {
            if (this.data.displayType == 1) {
                this.setData({
                    totalMoney: this.data.level1Money + this.data.level2Money + this.data.level3Money
                });
            }
            if (this.data.displayType == 2) {
                this.setData({
                    totalMoney: this.data.level1Money + (this.data.level2Targetlevel - this.data.level2Currentlevel) * this.data.level2Money + this.data.level3Money
                });
            }
        },
        getCharacters() {
            if (!this.data.userId) {
                this.setData({
                    isLogin: false,
                    showAuthMessage: true
                });
                return;
            }
            else {
                this.setData({
                    isLogin: true,
                    showAuthMessage: false
                });
            }
            const _this = this;
            app.requestFunc('/user/getCharacterList', { userId: this.data.userId, realmType: this.data.catalogType }, 'GET', res => {
                console.log(res.data);
                if (res.data.success == true) {
                    let data = {
                        charactersContent: new Array()
                    };
                    if (res.data.list.length == 0) {
                        wx.showModal({
                            title: '提示',
                            content: '请先新建角色',
                            success(res) {
                                if (res.confirm) {
                                    _this.triggerEvent('switchTab', { tabIndex: '5' });
                                }
                            }
                        });
                    }
                    else {
                        res.data.list.forEach(x => {
                            data.charactersContent.push({ id: x.characterId, name: x.characterName + '(' + x.accountName + ')' + '/' + _this.data.allianceHordeMap.get(x.allianceHorde) + '/' + _this.data.characterClassMap.get(x.characterClass) });
                        });
                    }
                    this.setData(data);
                }
            });
        },
        charactersChange(e) {
            this.setData({
                charactersIndex: parseInt(e.detail.value)
            });
        },
        changeCatalogType(e) {
            this.setData({
                catalogType: e.currentTarget.dataset.type,
                level1Index: 0,
                level2Index: 0,
                level3Index: 0
            });
            this.getLevel1();
            this.getCharacters();
        },
        gettodaysOrder() {
            app.requestFuncPromise('/order/todaysOrder', {}, 'GET')
                .then(res => {
                this.setData({
                    orderCount: res.data.count
                });
            });
        },
        showNotice() {
            if (!this.data.isLogin) {
                this.setData({
                    showAuthMessage: true
                });
                return;
            }
            const _this = this;
            if (this.data.charactersContent.length == 0) {
                wx.showModal({
                    title: '提示',
                    content: '请先新建角色',
                    showCancel: false,
                    success(res) {
                        if (res.confirm) {
                            _this.triggerEvent('switchTab', { tabIndex: '5' });
                        }
                    }
                });
            }
            else {
                this.setData({
                    showNotice: true
                });
            }
        },
        hideNotice() {
            this.setData({
                showNotice: false
            });
        },
        NavToCreateOrder() {
            this.hideNotice();
            let transdata = {
                mode: 'AddNew',
                characterName: this.data.charactersContent[this.data.charactersIndex].name,
                orderCatalog: '',
                orderCatalog1: this.data.level1Content[this.data.level1Index].id,
                orderCatalog2: this.data.level2Content[this.data.level2Index].id,
                orderCatalog3: this.data.level3Content[this.data.level3Index].id,
                money: this.data.totalMoney,
                characterId: this.data.charactersContent[this.data.charactersIndex].id
            };
            if (this.data.displayType == 1) {
                transdata.orderCatalog = this.data.level1Content[this.data.level1Index].name + '/' + this.data.level2Content[this.data.level2Index].name + '/' + this.data.level3Content[this.data.level3Index].name;
            }
            if (this.data.displayType == 2) {
                transdata.orderCatalog = this.data.level1Content[this.data.level1Index].name + '/' + this.data.level2Currentlevel + '-' + this.data.level2Targetlevel + '/' + this.data.level3Content[this.data.level3Index].name;
            }
            const comData = JSON.stringify(transdata);
            wx.navigateTo({
                url: '../OrderService/OrderEntry/OrderEntry' + '?data=' + comData,
                success: function (res) { },
                fail: function () { },
                complete: function () { }
            });
        },
        showAuthWindow: function () {
            this.setData({
                showAuthMessage: true
            });
        },
        hideAuthMessage: function () {
            this.setData({
                showAuthMessage: false
            });
        },
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3JkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJPcmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFjLENBQUE7QUFFaEMsU0FBUyxDQUFDO0lBQ1IsT0FBTyxFQUFFO1FBQ1AsY0FBYyxFQUFFLElBQUk7S0FDckI7SUFDRCxJQUFJLEVBQUU7UUFDSixNQUFNLEVBQUUsRUFBRTtRQUNWLFdBQVcsRUFBRSxHQUFHO1FBQ2hCLFdBQVcsRUFBRSxDQUFDO1FBQ2QsVUFBVSxFQUFFLENBQUM7UUFDYixrQkFBa0IsRUFBRSxFQUFFO1FBQ3RCLFNBQVMsRUFBRSxFQUFFO1FBRWIsS0FBSyxFQUFFLENBQUM7UUFDUixhQUFhLEVBQUUsSUFBSSxLQUFLLEVBQTZDO1FBQ3JFLFdBQVcsRUFBRSxDQUFDO1FBQ2QsV0FBVyxFQUFFLENBQUM7UUFDZCxhQUFhLEVBQUUsSUFBSSxLQUFLLEVBQTZDO1FBQ3JFLGlCQUFpQixFQUFFLEVBQUU7UUFDckIsa0JBQWtCLEVBQUUsR0FBRztRQUN2QixpQkFBaUIsRUFBRSxHQUFHO1FBQ3RCLFdBQVcsRUFBRSxDQUFDO1FBQ2QsV0FBVyxFQUFFLENBQUM7UUFDZCxhQUFhLEVBQUUsSUFBSSxLQUFLLEVBQTZDO1FBQ3JFLGlCQUFpQixFQUFFLEVBQUU7UUFDckIsV0FBVyxFQUFFLENBQUM7UUFDZCxXQUFXLEVBQUUsQ0FBQztRQUNkLGlCQUFpQixFQUFFLElBQUksS0FBSyxFQUE4QjtRQUMxRCxlQUFlLEVBQUUsQ0FBQztRQUNsQixVQUFVLEVBQUUsQ0FBQztRQUNiLGdCQUFnQixFQUFFLElBQUksR0FBRyxFQUFFO1FBQzNCLGlCQUFpQixFQUFFLElBQUksR0FBRyxFQUFFO1FBQzVCLFVBQVUsRUFBRSxLQUFLO1FBQ2pCLE9BQU8sRUFBRSxLQUFLO1FBQ2QsZUFBZSxFQUFFLEtBQUs7S0FDdkI7SUFFRCxTQUFTLEVBQUUsRUFBRTtJQUNiLFNBQVMsRUFBRTtRQUNU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O2dCQUNwQixRQUFRLEVBQUUsY0FBYSxDQUFDO2FBQ3pCLENBQUMsQ0FBQTtRQUVKLENBQUM7UUFDRCxjQUFjLEVBQUU7WUFDZCxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLGVBQWUsRUFBRSxJQUFJO2FBQ3RCLENBQUMsQ0FBQTtRQUNKLENBQUM7UUFDRCxlQUFlLEVBQUU7WUFDZixJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLGVBQWUsRUFBRSxLQUFLO2FBQ3ZCLENBQUMsQ0FBQTtRQUNKLENBQUM7S0FDRjtDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFwcCA9IGdldEFwcDxJQXBwT3B0aW9uPigpXHJcblxyXG5Db21wb25lbnQoe1xyXG4gIG9wdGlvbnM6IHtcclxuICAgIGFkZEdsb2JhbENsYXNzOiB0cnVlLFxyXG4gIH0sXHJcbiAgZGF0YToge1xyXG4gICAgdXNlcklkOiAnJyxcclxuICAgIGNhdGFsb2dUeXBlOiAnMScsXHJcbiAgICBkaXNwbGF5VHlwZTogMSxcclxuICAgIG9yZGVyQ291bnQ6IDAsXHJcbiAgICBvcmRlckJhY2tncm91bmRJbWc6ICcnLFxyXG4gICAgbm90aWNlSW1nOiAnJyxcclxuXHJcbiAgICBpbmRleDogMCxcclxuICAgIGxldmVsMUNvbnRlbnQ6IG5ldyBBcnJheTx7aWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBtb25leTogbnVtYmVyfT4oKSxcclxuICAgIGxldmVsMUluZGV4OiAwLFxyXG4gICAgbGV2ZWwxTW9uZXk6IDAsXHJcbiAgICBsZXZlbDJDb250ZW50OiBuZXcgQXJyYXk8e2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbW9uZXk6IG51bWJlcn0+KCksXHJcbiAgICBsZXZlbDJEaXNwbGF5TmFtZTogJycsXHJcbiAgICBsZXZlbDJDdXJyZW50bGV2ZWw6IE5hTixcclxuICAgIGxldmVsMlRhcmdldGxldmVsOiBOYU4sXHJcbiAgICBsZXZlbDJJbmRleDogMCxcclxuICAgIGxldmVsMk1vbmV5OiAwLFxyXG4gICAgbGV2ZWwzQ29udGVudDogbmV3IEFycmF5PHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIG1vbmV5OiBudW1iZXJ9PigpLFxyXG4gICAgbGV2ZWwzRGlzcGxheU5hbWU6ICcnLFxyXG4gICAgbGV2ZWwzSW5kZXg6IDAsXHJcbiAgICBsZXZlbDNNb25leTogMCxcclxuICAgIGNoYXJhY3RlcnNDb250ZW50OiBuZXcgQXJyYXk8e2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZ30+KCksXHJcbiAgICBjaGFyYWN0ZXJzSW5kZXg6IDAsXHJcbiAgICB0b3RhbE1vbmV5OiAwLFxyXG4gICAgYWxsaWFuY2VIb3JkZU1hcDogbmV3IE1hcCgpLFxyXG4gICAgY2hhcmFjdGVyQ2xhc3NNYXA6IG5ldyBNYXAoKSxcclxuICAgIHNob3dOb3RpY2U6IGZhbHNlLFxyXG4gICAgaXNMb2dpbjogZmFsc2UsXHJcbiAgICBzaG93QXV0aE1lc3NhZ2U6IGZhbHNlXHJcbiAgfSxcclxuXHJcbiAgYmVoYXZpb3JzOiBbXSxcclxuICBsaWZldGltZXM6IHtcclxuICAgIHJlYWR5KCkge1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIGluaXREYXRhKCkge1xyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIHVzZXJJZDogd3guZ2V0U3RvcmFnZVN5bmMoJ3VzZXJJZCcpLFxyXG4gICAgICAgIGFsbGlhbmNlSG9yZGVNYXA6IG5ldyBNYXAoW1sxLCAn6IGU55ufJ10sIFsyLCAn6YOo6JC9J11dKSxcclxuICAgICAgICBjaGFyYWN0ZXJDbGFzc01hcDogbmV3IE1hcChbWzEsICflnKPpqpHlo6snXSwgWzIsICfmiJjlo6snXSwgWzMsICfmrbvkuqHpqpHlo6snXSwgWzQsICfnjI7kuronXSwgWzUsICfokKjmu6Hnpa3lj7gnXSwgWzYsICfmvZzooYzogIUnXSwgWzcsICflvrfpsoHkvIonXSwgWzgsICfmgbbprZTnjI7miYsnXSwgWzksICfms5XluIgnXSwgWzEwLCAn54mn5biIJ10sIFsxMSwgJ+acr+WjqyddLCBbMTIsICfmrablg6cnXV0pLFxyXG4gICAgICAgIG9yZGVyQmFja2dyb3VuZEltZzogYXBwLmdsb2JhbERhdGEuUm9vdFVSTCArICd3YXJjcmFmdC9zdGF0aWMvaW1nL29yZGVyLnBuZycsXHJcbiAgICAgICAgbm90aWNlSW1nOiBhcHAuZ2xvYmFsRGF0YS5Sb290VVJMICsgJ3dhcmNyYWZ0L3N0YXRpYy9pbWcvbm90aWNlLmpwZydcclxuICAgICAgfSlcclxuICAgICAgdGhpcy5nZXRMZXZlbDEoKTtcclxuICAgICAgdGhpcy5nZXRDaGFyYWN0ZXJzKCk7XHJcbiAgICAgIHRoaXMuZ2V0dG9kYXlzT3JkZXIoKTtcclxuICAgIH0sXHJcbiAgICBnZXRMZXZlbDEoKSB7XHJcbiAgICAgIGFwcC5yZXF1ZXN0RnVuY1Byb21pc2UoJy9zeXN0ZW0vZ2V0Q2F0YWxvZ0xpc3QnLCB7cGFyZW50SWQ6ICcwJywgY2F0YWxvZ1R5cGU6IHBhcnNlSW50KHRoaXMuZGF0YS5jYXRhbG9nVHlwZSl9LCAnR0VUJylcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgbGV2ZWwxQ29udGVudDogbmV3IEFycmF5PHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIG1vbmV5OiBudW1iZXJ9PigpLFxyXG4gICAgICAgICAgbGV2ZWwxTW9uZXk6IHJlcy5kYXRhLmNhdGFsb2dMaXN0WzBdLm1vbmV5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5kYXRhLmNhdGFsb2dMaXN0LmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICBkYXRhLmxldmVsMUNvbnRlbnQucHVzaCh7aWQ6IHguaWQsIG5hbWU6IHguY2F0YWxvZ05hbWUsIG1vbmV5OiB4Lm1vbmV5fSkgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLmdldExldmVsMihyZXMuZGF0YS5jYXRhbG9nTGlzdFswXS5pZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChyZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgbGV2ZWwxQ2hhbmdlKGUpIHtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBsZXZlbDFJbmRleDogcGFyc2VJbnQoZS5kZXRhaWwudmFsdWUpLFxyXG4gICAgICAgIGxldmVsMU1vbmV5OiB0aGlzLmRhdGEubGV2ZWwxQ29udGVudFtwYXJzZUludChlLmRldGFpbC52YWx1ZSldLm1vbmV5LFxyXG4gICAgICAgIGxldmVsMkluZGV4OiAwLFxyXG4gICAgICAgIGxldmVsM0luZGV4OiAwXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMuZ2V0TGV2ZWwyKHRoaXMuZGF0YS5sZXZlbDFDb250ZW50W3RoaXMuZGF0YS5sZXZlbDFJbmRleF0uaWQpXHJcbiAgICB9LFxyXG4gICAgZ2V0TGV2ZWwyKHBhcmVudElkOiBzdHJpbmcpIHtcclxuICAgICAgYXBwLnJlcXVlc3RGdW5jUHJvbWlzZSgnL3N5c3RlbS9nZXRDYXRhbG9nTGlzdCcsIHtwYXJlbnRJZDogcGFyZW50SWQsIGNhdGFsb2dUeXBlOiBwYXJzZUludCh0aGlzLmRhdGEuY2F0YWxvZ1R5cGUpfSwgJ0dFVCcpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgZGlzcGxheVR5cGU6IHJlcy5kYXRhLmNhdGFsb2dMaXN0WzBdLmNhdGFsb2dEaXNwbGF5VHlwZSxcclxuICAgICAgICAgIGxldmVsMkRpc3BsYXlOYW1lOiByZXMuZGF0YS5jYXRhbG9nTGlzdFswXS5jYXRhbG9nRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICBsZXZlbDJNb25leTogcmVzLmRhdGEuY2F0YWxvZ0xpc3RbMF0ubW9uZXlcclxuICAgICAgICB9KSBcclxuICAgICAgICBpZih0aGlzLmRhdGEuZGlzcGxheVR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGxldmVsMkNvbnRlbnQ6IG5ldyBBcnJheTx7aWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBtb25leTogbnVtYmVyfT4oKSxcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJlcy5kYXRhLmNhdGFsb2dMaXN0LmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICAgIGRhdGEubGV2ZWwyQ29udGVudC5wdXNoKHtpZDogeC5pZCwgbmFtZTogeC5jYXRhbG9nTmFtZSwgbW9uZXk6IHgubW9uZXl9KSAgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5kYXRhLmRpc3BsYXlUeXBlID09IDIpIHtcclxuICAgICAgICAgIGxldCB0ZW1wID0gcmVzLmRhdGEuY2F0YWxvZ0xpc3RbMF0uY2F0YWxvZ05hbWUuc3BsaXQoJy0nKTtcclxuICAgICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICBsZXZlbDJDdXJyZW50bGV2ZWw6IHBhcnNlSW50KHRlbXBbMF0pLFxyXG4gICAgICAgICAgICBsZXZlbDJUYXJnZXRsZXZlbDogcGFyc2VJbnQodGVtcFsxXSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc2V0RGF0YShkYXRhKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbGNUb3RhbE1vbmV5KCk7XHJcbiAgICAgICAgdGhpcy5nZXRMZXZlbDMocmVzLmRhdGEuY2F0YWxvZ0xpc3RbMF0uaWQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2gocmVzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIGxldmVsMkNoYW5nZShlKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgbGV2ZWwySW5kZXg6IHBhcnNlSW50KGUuZGV0YWlsLnZhbHVlKSxcclxuICAgICAgICBsZXZlbDJNb25leTogdGhpcy5kYXRhLmxldmVsMkNvbnRlbnRbcGFyc2VJbnQoZS5kZXRhaWwudmFsdWUpXS5tb25leSxcclxuICAgICAgICBsZXZlbDNJbmRleDogMFxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLmdldExldmVsMyh0aGlzLmRhdGEubGV2ZWwyQ29udGVudFt0aGlzLmRhdGEubGV2ZWwySW5kZXhdLmlkKVxyXG4gICAgfSxcclxuICAgIGdldExldmVsMyhwYXJlbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgIGFwcC5yZXF1ZXN0RnVuY1Byb21pc2UoJy9zeXN0ZW0vZ2V0Q2F0YWxvZ0xpc3QnLCB7cGFyZW50SWQ6IHBhcmVudElkLCBjYXRhbG9nVHlwZTogcGFyc2VJbnQodGhpcy5kYXRhLmNhdGFsb2dUeXBlKX0sICdHRVQnKVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICBsZXZlbDNDb250ZW50OiBuZXcgQXJyYXk8e2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbW9uZXk6IG51bWJlcn0+KCksXHJcbiAgICAgICAgICBsZXZlbDNEaXNwbGF5TmFtZTogcmVzLmRhdGEuY2F0YWxvZ0xpc3RbMF0uY2F0YWxvZ0Rpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgbGV2ZWwzTW9uZXk6IHJlcy5kYXRhLmNhdGFsb2dMaXN0WzBdLm1vbmV5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5kYXRhLmNhdGFsb2dMaXN0LmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgICBkYXRhLmxldmVsM0NvbnRlbnQucHVzaCh7aWQ6IHguaWQsIG5hbWU6IHguY2F0YWxvZ05hbWUsIG1vbmV5OiB4Lm1vbmV5fSkgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLmNhbGNUb3RhbE1vbmV5KCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChyZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgbGV2ZWwzQ2hhbmdlKGUpIHtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBsZXZlbDNJbmRleDogcGFyc2VJbnQoZS5kZXRhaWwudmFsdWUpLFxyXG4gICAgICAgIGxldmVsM01vbmV5OiB0aGlzLmRhdGEubGV2ZWwzQ29udGVudFtwYXJzZUludChlLmRldGFpbC52YWx1ZSldLm1vbmV5XHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMuY2FsY1RvdGFsTW9uZXkoKTtcclxuICAgIH0sXHJcblxyXG4gICAgbGV2ZWwyQ3VycmVudExldmVsQmx1cigpIHtcclxuICAgICAgdGhpcy5jYWxjVG90YWxNb25leSgpO1xyXG4gICAgfSxcclxuICAgIGxldmVsMlRhcmdldExldmVsQmx1cigpIHtcclxuICAgICAgdGhpcy5jYWxjVG90YWxNb25leSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBsZXZlbDJDdXJyZW50TGV2ZWxJbnB1dChlKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgbGV2ZWwyQ3VycmVudGxldmVsOiBwYXJzZUludChlLmRldGFpbC52YWx1ZSlcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBsZXZlbDJUYXJnZXRMZXZlbElucHV0KGUpIHtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBsZXZlbDJUYXJnZXRsZXZlbDogcGFyc2VJbnQoZS5kZXRhaWwudmFsdWUpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGNUb3RhbE1vbmV5KCkge1xyXG4gICAgICBpZih0aGlzLmRhdGEuZGlzcGxheVR5cGUgPT0gMSkge1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICB0b3RhbE1vbmV5OiB0aGlzLmRhdGEubGV2ZWwxTW9uZXkgKyB0aGlzLmRhdGEubGV2ZWwyTW9uZXkgKyB0aGlzLmRhdGEubGV2ZWwzTW9uZXlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMuZGF0YS5kaXNwbGF5VHlwZSA9PSAyKSB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgIHRvdGFsTW9uZXk6IHRoaXMuZGF0YS5sZXZlbDFNb25leSArICAodGhpcy5kYXRhLmxldmVsMlRhcmdldGxldmVsIC0gdGhpcy5kYXRhLmxldmVsMkN1cnJlbnRsZXZlbCkgKiB0aGlzLmRhdGEubGV2ZWwyTW9uZXkgKyB0aGlzLmRhdGEubGV2ZWwzTW9uZXlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldENoYXJhY3RlcnMoKSB7XHJcbiAgICAgIGlmKCF0aGlzLmRhdGEudXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgIGlzTG9naW46IGZhbHNlLFxyXG4gICAgICAgICAgc2hvd0F1dGhNZXNzYWdlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgIGlzTG9naW46IHRydWUsXHJcbiAgICAgICAgICBzaG93QXV0aE1lc3NhZ2U6IGZhbHNlXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIGFwcC5yZXF1ZXN0RnVuYygnL3VzZXIvZ2V0Q2hhcmFjdGVyTGlzdCcsIHt1c2VySWQ6IHRoaXMuZGF0YS51c2VySWQsIHJlYWxtVHlwZTogdGhpcy5kYXRhLmNhdGFsb2dUeXBlfSwgJ0dFVCcsIHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xyXG4gICAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgICBjaGFyYWN0ZXJzQ29udGVudDogbmV3IEFycmF5PHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmd9PigpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYocmVzLmRhdGEubGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+aPkOekuicsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAn6K+35YWI5paw5bu66KeS6ImyJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocmVzLmNvbmZpcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyRXZlbnQoJ3N3aXRjaFRhYicsIHt0YWJJbmRleDogJzUnfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlcy5kYXRhLmxpc3QuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICAgICAgICAgIGRhdGEuY2hhcmFjdGVyc0NvbnRlbnQucHVzaCh7aWQ6IHguY2hhcmFjdGVySWQsIG5hbWU6IHguY2hhcmFjdGVyTmFtZSArICcoJyArIHguYWNjb3VudE5hbWUgKyAnKScgKyAnLycgKyBfdGhpcy5kYXRhLmFsbGlhbmNlSG9yZGVNYXAuZ2V0KHguYWxsaWFuY2VIb3JkZSkgKyAnLycgKyBfdGhpcy5kYXRhLmNoYXJhY3RlckNsYXNzTWFwLmdldCh4LmNoYXJhY3RlckNsYXNzKX0pICBcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoZGF0YSlcclxuICAgICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBjaGFyYWN0ZXJzQ2hhbmdlKGUpIHtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBjaGFyYWN0ZXJzSW5kZXg6IHBhcnNlSW50KGUuZGV0YWlsLnZhbHVlKVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICBjaGFuZ2VDYXRhbG9nVHlwZShlKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgY2F0YWxvZ1R5cGU6IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUsXHJcbiAgICAgICAgbGV2ZWwxSW5kZXg6IDAsXHJcbiAgICAgICAgbGV2ZWwySW5kZXg6IDAsXHJcbiAgICAgICAgbGV2ZWwzSW5kZXg6IDBcclxuICAgICAgfSlcclxuICAgICAgdGhpcy5nZXRMZXZlbDEoKTtcclxuICAgICAgdGhpcy5nZXRDaGFyYWN0ZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0dG9kYXlzT3JkZXIoKSB7XHJcbiAgICAgIGFwcC5yZXF1ZXN0RnVuY1Byb21pc2UoJy9vcmRlci90b2RheXNPcmRlcicsIHt9LCAnR0VUJylcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgb3JkZXJDb3VudDogcmVzLmRhdGEuY291bnRcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIHNob3dOb3RpY2UoKSB7XHJcbiAgICAgIGlmKCF0aGlzLmRhdGEuaXNMb2dpbikge1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICBzaG93QXV0aE1lc3NhZ2U6IHRydWVcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcclxuICAgICAgaWYodGhpcy5kYXRhLmNoYXJhY3RlcnNDb250ZW50Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgd3guc2hvd01vZGFsKHtcclxuICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JyxcclxuICAgICAgICAgIGNvbnRlbnQ6ICfor7flhYjmlrDlu7rop5LoibInLFxyXG4gICAgICAgICAgc2hvd0NhbmNlbDogZmFsc2UsXHJcbiAgICAgICAgICBzdWNjZXNzIChyZXMpIHtcclxuICAgICAgICAgICAgaWYgKHJlcy5jb25maXJtKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlckV2ZW50KCdzd2l0Y2hUYWInLCB7dGFiSW5kZXg6ICc1J30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgc2hvd05vdGljZTogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoaWRlTm90aWNlKCkge1xyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIHNob3dOb3RpY2U6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgTmF2VG9DcmVhdGVPcmRlcigpIHtcclxuICAgICAgdGhpcy5oaWRlTm90aWNlKCk7XHJcbiAgICAgIGxldCB0cmFuc2RhdGEgPSB7XHJcbiAgICAgICAgbW9kZTogJ0FkZE5ldycsXHJcbiAgICAgICAgY2hhcmFjdGVyTmFtZTogdGhpcy5kYXRhLmNoYXJhY3RlcnNDb250ZW50W3RoaXMuZGF0YS5jaGFyYWN0ZXJzSW5kZXhdLm5hbWUsXHJcbiAgICAgICAgb3JkZXJDYXRhbG9nOiAnJyxcclxuICAgICAgICBvcmRlckNhdGFsb2cxOiB0aGlzLmRhdGEubGV2ZWwxQ29udGVudFt0aGlzLmRhdGEubGV2ZWwxSW5kZXhdLmlkLFxyXG4gICAgICAgIG9yZGVyQ2F0YWxvZzI6IHRoaXMuZGF0YS5sZXZlbDJDb250ZW50W3RoaXMuZGF0YS5sZXZlbDJJbmRleF0uaWQsXHJcbiAgICAgICAgb3JkZXJDYXRhbG9nMzogdGhpcy5kYXRhLmxldmVsM0NvbnRlbnRbdGhpcy5kYXRhLmxldmVsM0luZGV4XS5pZCxcclxuICAgICAgICBtb25leTogdGhpcy5kYXRhLnRvdGFsTW9uZXksXHJcbiAgICAgICAgY2hhcmFjdGVySWQ6IHRoaXMuZGF0YS5jaGFyYWN0ZXJzQ29udGVudFt0aGlzLmRhdGEuY2hhcmFjdGVyc0luZGV4XS5pZFxyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMuZGF0YS5kaXNwbGF5VHlwZSA9PSAxKSB7XHJcbiAgICAgICAgdHJhbnNkYXRhLm9yZGVyQ2F0YWxvZyA9IHRoaXMuZGF0YS5sZXZlbDFDb250ZW50W3RoaXMuZGF0YS5sZXZlbDFJbmRleF0ubmFtZSArICcvJyArIHRoaXMuZGF0YS5sZXZlbDJDb250ZW50W3RoaXMuZGF0YS5sZXZlbDJJbmRleF0ubmFtZSArICcvJyArIHRoaXMuZGF0YS5sZXZlbDNDb250ZW50W3RoaXMuZGF0YS5sZXZlbDNJbmRleF0ubmFtZVxyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMuZGF0YS5kaXNwbGF5VHlwZSA9PSAyKSB7XHJcbiAgICAgICAgdHJhbnNkYXRhLm9yZGVyQ2F0YWxvZyA9IHRoaXMuZGF0YS5sZXZlbDFDb250ZW50W3RoaXMuZGF0YS5sZXZlbDFJbmRleF0ubmFtZSArICcvJyArIHRoaXMuZGF0YS5sZXZlbDJDdXJyZW50bGV2ZWwgKyAnLScgKyB0aGlzLmRhdGEubGV2ZWwyVGFyZ2V0bGV2ZWwgKyAnLycgKyB0aGlzLmRhdGEubGV2ZWwzQ29udGVudFt0aGlzLmRhdGEubGV2ZWwzSW5kZXhdLm5hbWVcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjb21EYXRhID0gSlNPTi5zdHJpbmdpZnkodHJhbnNkYXRhKVxyXG4gICAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgICB1cmw6ICcuLi9PcmRlclNlcnZpY2UvT3JkZXJFbnRyeS9PcmRlckVudHJ5JyArICc/ZGF0YT0nICsgY29tRGF0YSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyB9LFxyXG4gICAgICAgIGZhaWw6IGZ1bmN0aW9uKCkgeyB9LFxyXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHsgfVxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgIH0sXHJcbiAgICBzaG93QXV0aFdpbmRvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIHNob3dBdXRoTWVzc2FnZTogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIGhpZGVBdXRoTWVzc2FnZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgIHNob3dBdXRoTWVzc2FnZTogZmFsc2VcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgfVxyXG59KSJdfQ==